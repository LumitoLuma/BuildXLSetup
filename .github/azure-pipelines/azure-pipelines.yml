trigger:

- master

pool:
  vmImage: 'windows-latest'
  
steps:
- script: |
    "C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Auxiliary\\Build\\vcvars64.bat"
    pushd src
    NMake.exe
  displayName: 'Running NMAKE'
 
- task: PublishPipelineArtifact@1
  inputs:
    targetPath: '$(Pipeline.Workspace)\s\src\BuildXL.Setup\bin\x64\Debug\BuildXL.Setup.msi'
    artifact: 'BuildXL Installer MSI'
    publishLocation: 'pipeline'
  displayName: 'Publishing compiled installer (MSI)'