trigger:

- master

pool:
  vmImage: 'windows-latest'
  
steps:
- script: |
    pushd src
    nuget.exe restore
  displayName: 'Restoring packages with nuget'
 
- task: MSBuild@1
  inputs:
    solution: 'src\BuildXL Installer.sln'
    msbuildArchitecture: 'x64'
    platform: 'x64'
    configuration: 'Debug'
    maximumCpuCount: true
  displayName: 'Building with MSBuild'

- task: PublishPipelineArtifact@1
  inputs:
    targetPath: '$(Pipeline.Workspace)\src\BuildXL.Setup\bin\x64\Debug\BuildXL.Setup.msi'
    artifact: 'BuildXL Installer MSI'
    publishLocation: 'pipeline'